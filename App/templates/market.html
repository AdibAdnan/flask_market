{% extends 'base.html' %}
{% block title %}Market{% endblock %}

{% block content %}
<div class="container-fluid mt-5">
        <div class="p-4 mb-4 bg-light rounded-3">
            <h1 class="text-center">Market Page</h1>
            <p class="text-center">Welcome to the market page. Here you can find various products and services.</p>
        </div>
        <div class="row">
            <div class="col-md-6">
                <h2>Available Item</h2>
                <p>Buy some item to your account</p>
                <table class="table table-dark table-striped table-bordered align-middle mt-4">
                    
                    <thead>
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Item Name</th>
                        <th scope="col">Barcode</th>
                        <th scope="col">Price ($)</th>
                        <th scope="col">Options</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in items %}
                    <tr>
                        <td>{{ item.id }}</td>
                        <td>{{ item.item_name }}</td>
                        <td>{{ item.barcode }}</td>
                        <td>{{ item.price }}</td>
                        <td>
                            <button type="button" class="btn btn-info btn-sm me-2" data-bs-toggle="modal" data-bs-target="#infoModal{{ item.id }}">
                                More Info
                            </button>
                            <button type="button" class="btn btn-success btn-sm" data-bs-toggle="modal" data-bs-target="#purchaseModal{{ item.id }}">
                                Buy
                            </button>
                        </td>
                        {% include 'modal.html' %}
                    </tr>
                    {% endfor %}
                    </tbody>
                    </table>
            </div>
            <div class="col-md-6">
                <h2>Purchased Items</h2>
                <p>Click on an item to sell it back to the market.</p>
                <table class="table table-dark table-striped table-bordered align-middle mt-4">
                    <thead>
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Item Name</th>
                            <th scope="col">Barcode</th>
                            <th scope="col">Price ($)</th>
                            <th scope="col">Options</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in purchased_items %}
                        <tr>
                            <td>{{ item.id }}</td>
                            <td>{{ item.item_name }}</td>
                            <td>{{ item.barcode }}</td>
                            <td>{{ item.price }}</td>
                            <td>
                                <a href="{{ url_for('sell_item', item_id=item.id) }}" class="btn btn-danger btn-sm">Sell</a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
{% endblock %}